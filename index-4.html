<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Zahra Bowl">
<meta name="theme-color" content="#0F1419">
<title>Zahra Bowl — Yatırımcı Paneli</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800;900&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0F1419;--s1:#141c26;--s2:#1a2535;--bd:#1e2f42;
  --or:#F57C00;--or2:rgba(245,124,0,.13);--or3:rgba(245,124,0,.35);
  --cr:#F5EDD6;--tx:#e8dcc8;--mu:#6b7e96;
  --gn:#22c55e;--am:#f59e0b;--rd:#ef4444;
}
body{background:var(--bg);color:var(--tx);font-family:'DM Sans',sans-serif;min-height:100vh;-webkit-font-smoothing:antialiased;overscroll-behavior:none}
h1,h2,h3{font-family:'Inter',system-ui,sans-serif}

/* STATUS BAR */
#statusBar{position:sticky;top:0;z-index:100;padding:12px 18px;display:flex;align-items:center;justify-content:space-between;backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.06);transition:background .4s}
#statusBar.green{background:rgba(34,197,94,.18);border-bottom-color:rgba(34,197,94,.3)}
#statusBar.amber{background:rgba(245,158,11,.18);border-bottom-color:rgba(245,158,11,.3)}
#statusBar.red{background:rgba(239,68,68,.18);border-bottom-color:rgba(239,68,68,.3)}
.sdot{width:10px;height:10px;border-radius:50%;animation:blink 2s infinite;flex-shrink:0}
#statusBar.green .sdot{background:var(--gn);box-shadow:0 0 10px var(--gn)}
#statusBar.amber .sdot{background:var(--am);box-shadow:0 0 10px var(--am)}
#statusBar.red   .sdot{background:var(--rd);box-shadow:0 0 10px var(--rd)}
@keyframes blink{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.5)}}
.stxt h2{font-size:11px;font-weight:700;letter-spacing:.07em;text-transform:uppercase}
.stxt p{font-size:11px;color:var(--mu);margin-top:2px}
#statusBar.green .stxt h2{color:#4ade80}
#statusBar.amber .stxt h2{color:#fcd34d}
#statusBar.red   .stxt h2{color:#f87171}

/* LAYOUT */
.wrap{max-width:540px;margin:0 auto;padding:0 16px 120px}

/* HEADER */
.hdr{padding:20px 0 14px;display:flex;justify-content:space-between;align-items:flex-start}
.brand{font-size:24px;font-weight:800;color:var(--cr);letter-spacing:-.02em}
.brand span{color:var(--or)}
.bdate{font-size:11px;color:var(--mu);margin-top:3px}

/* SEGMENT */
.seg{display:flex;background:var(--s2);border-radius:10px;padding:3px;margin-bottom:16px;border:1px solid var(--bd)}
.seg button{flex:1;border:none;background:transparent;color:var(--mu);font-family:'Inter',system-ui,sans-serif;font-size:13px;font-weight:700;padding:8px 0;border-radius:7px;cursor:pointer;transition:all .2s}
.seg button.on{background:var(--or);color:#fff;box-shadow:0 2px 12px var(--or3)}

/* KPI GRID */
.kgrid{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:16px}
.kcard{background:var(--s1);border:1px solid var(--bd);border-top:2px solid rgba(245,124,0,.4);border-radius:14px;padding:14px 12px;position:relative;overflow:hidden;transition:transform .2s;min-width:0;box-sizing:border-box}
.kcard.feat{border-color:var(--or);border-top-color:var(--or);box-shadow:0 0 20px var(--or2)}
.klbl{font-size:10px;color:var(--mu);letter-spacing:.04em;margin-bottom:6px;font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.kval{font-family:'Inter',system-ui,sans-serif;font-size:clamp(13px,4.2vw,20px);font-weight:800;color:var(--cr);line-height:1.2;display:block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.kcard.feat .kval{color:var(--or)}
.ksub{font-size:10px;color:var(--mu);margin-top:5px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

/* CARD */
.card{background:var(--s1);border:1px solid var(--bd);border-radius:16px;padding:18px;margin-bottom:14px}
.ctitle{display:flex;align-items:center;gap:8px;font-family:'Inter',system-ui,sans-serif;font-size:13px;font-weight:700;color:var(--cr);margin-bottom:14px}
.ctitle svg{color:var(--or)}

/* CHART */
.chart-area{width:100%;height:210px;position:relative}
.chart-area svg{width:100%;height:100%}
.chart-tooltip{position:absolute;background:#1a2535;border:1px solid #F57C00;border-radius:8px;padding:7px 10px;font-size:11px;color:#e8dcc8;pointer-events:none;display:none;white-space:nowrap;z-index:10}
.chart-legend{display:flex;gap:14px;margin-top:8px;font-size:10px;color:#6b7e96}
.leg-dot{width:8px;height:8px;border-radius:2px;display:inline-block;margin-right:4px}

/* ACTIONS */
.acts{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:14px}
.btn{display:inline-flex;align-items:center;gap:6px;border:none;cursor:pointer;border-radius:9px;font-family:'DM Sans',sans-serif;font-weight:500;font-size:13px;padding:9px 14px;transition:all .2s;-webkit-tap-highlight-color:transparent}
.btn-p{background:var(--or);color:#fff;box-shadow:0 4px 16px var(--or3)}
.btn-p:active{background:#d96e00}
.btn-o{background:var(--or2);color:var(--or);border:1px solid rgba(245,124,0,.3)}
.btn-o:active{background:rgba(245,124,0,.25)}
.btn-g{background:var(--s2);color:var(--mu);border:1px solid var(--bd)}
.btn-g:active{color:var(--cr)}

/* NOTE */
.note{background:var(--s1);border:1px solid var(--bd);border-radius:12px;padding:13px;font-size:12px;color:var(--mu);line-height:1.7}
.note strong{color:var(--or)}

/* FORM VIEW */
#formView{display:none;padding:20px 0}
.back{display:inline-flex;align-items:center;gap:5px;color:var(--mu);font-size:13px;cursor:pointer;background:none;border:none;margin-bottom:18px;-webkit-tap-highlight-color:transparent}
.ftitle{font-size:24px;font-weight:800;color:var(--cr);margin-bottom:3px}
.fsub{font-size:13px;color:var(--mu);margin-bottom:20px}
.igrp{margin-bottom:16px}
.ilbl{display:block;font-family:'Inter',system-ui,sans-serif;font-size:13px;font-weight:700;color:var(--cr);margin-bottom:6px}
.ifield{width:100%;background:var(--bg);border:1.5px solid var(--bd);border-radius:12px;color:var(--cr);font-family:'DM Sans',sans-serif;font-size:20px;padding:14px 16px;outline:none;transition:border-color .2s,box-shadow .2s;-webkit-appearance:none;appearance:none}
.ifield:focus{border-color:var(--or);box-shadow:0 0 0 3px var(--or2)}
.ifield::placeholder{color:var(--mu)}
.crow{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:16px;padding-top:16px;border-top:1px solid var(--bd)}
.cbox{background:var(--bg);border-radius:10px;padding:13px}
.clbl{font-size:10px;color:var(--mu);letter-spacing:.04em;margin-bottom:4px;font-weight:500}
.cval{font-family:'Inter',system-ui,sans-serif;font-size:clamp(15px,4vw,20px);font-weight:800;word-break:break-word;overflow-wrap:break-word}
.csub{font-size:10px;color:var(--mu);margin-top:2px}
.wbox{display:flex;align-items:flex-start;gap:8px;padding:10px 12px;border-radius:8px;margin-top:10px;font-size:12px;line-height:1.5}
.wred{background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);color:#f87171}
.wamb{background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.3);color:#fcd34d}
.subbtn{width:100%;background:var(--or);color:#fff;border:none;border-radius:14px;padding:17px;font-family:'Inter',system-ui,sans-serif;font-size:15px;font-weight:800;cursor:pointer;margin-top:16px;box-shadow:0 6px 24px var(--or3);transition:all .2s;letter-spacing:.02em;-webkit-tap-highlight-color:transparent}
.subbtn:active{background:#d96e00;transform:scale(.98)}
.subbtn:disabled{opacity:.5;cursor:not-allowed}
.sucbox{display:flex;align-items:center;gap:8px;padding:13px 15px;background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.3);border-radius:10px;margin-top:12px;color:#4ade80;font-size:13px}

/* TOAST */
#toastWrap{position:fixed;bottom:90px;left:50%;transform:translateX(-50%);z-index:999;display:flex;flex-direction:column;gap:8px;align-items:center;pointer-events:none}
.toast{background:var(--s2);border:1px solid var(--bd);color:var(--cr);padding:10px 20px;border-radius:30px;font-size:13px;font-weight:500;animation:sup .3s ease;box-shadow:0 4px 20px rgba(0,0,0,.5);white-space:nowrap}
.toast.ok{border-color:rgba(34,197,94,.4);color:#4ade80}
.toast.err{border-color:rgba(239,68,68,.4);color:#f87171}
@keyframes sup{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}

/* IMPORT MODAL */
#modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:200;align-items:flex-end;justify-content:center;padding:0 16px}
#modal.show{display:flex}
.mbox{background:var(--s2);border:1px solid var(--bd);border-radius:20px 20px 0 0;padding:24px;width:100%;max-width:540px;animation:sup .3s ease}
.mbox h3{font-family:'Inter',system-ui,sans-serif;font-size:16px;font-weight:700;color:var(--cr);margin-bottom:8px}
.mbox p{font-size:12px;color:var(--mu);margin-bottom:12px}
.mbox textarea{width:100%;height:90px;background:var(--bg);border:1.5px solid var(--bd);border-radius:10px;color:var(--cr);padding:12px;font-size:12px;font-family:monospace;resize:none;outline:none}
.mbox textarea:focus{border-color:var(--or)}
.mbtns{display:flex;gap:10px;margin-top:12px}
</style>
</head>
<body>

<!-- STATUS BAR -->
<div id="statusBar" class="green">
  <div class="stxt">
    <h2 id="statusTitle">SİSTEM OPTİMİZE — YÜKSEK VERİMLİLİK</h2>
    <p id="statusSub">Kâr: %0 · Atık: %0</p>
  </div>
  <div class="sdot"></div>
</div>

<!-- DASHBOARD -->
<div id="dashView">
  <div class="wrap">
    <!-- Header -->
    <div class="hdr">
      <div>
        <div class="brand">ZAHRA <span>BOWL</span></div>
        <div class="bdate" id="dateStr">—</div>
      </div>
      <button class="btn btn-p" onclick="showForm()">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
        Veri Gir
      </button>
    </div>

    <!-- Segment -->
    <div class="seg">
      <button id="seg-daily" class="on" onclick="setPeriod('daily')">Günlük</button>
      <button id="seg-weekly" onclick="setPeriod('weekly')">Haftalık</button>
      <button id="seg-monthly" onclick="setPeriod('monthly')">Aylık</button>
    </div>

    <!-- KPI Grid -->
    <div class="kgrid">
      <div class="kcard" style="grid-column:span 2">
        <div class="klbl">Ciro</div>
        <div class="kval" id="kRevenue">DH0</div>
        <div class="ksub">Toplam DH</div>
      </div>
      <div class="kcard" style="grid-column:span 2">
        <div class="klbl">Satış</div>
        <div class="kval" id="kBowls">0</div>
        <div class="ksub">Kase adedi</div>
      </div>
    </div>

    <!-- Chart -->
    <div class="card">
      <div class="ctitle">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>
        <span id="chartTitle">Günlük Kase Satışı — Son 7 Gün</span>
      </div>
      <div class="chart-area" style="position:relative">
        <svg id="chartSvg" viewBox="0 0 320 180" preserveAspectRatio="none" style="width:100%;height:100%"></svg>
        <div id="chartTooltip" class="chart-tooltip"></div>
      </div>
      <div class="chart-legend">
        <span><span class="leg-dot" style="background:#F57C00"></span>Bugün</span>
        <span><span class="leg-dot" style="background:rgba(245,124,0,0.35)"></span>Önceki günler</span>
        <span style="margin-left:auto;font-size:10px;color:#6b7e96">Son 7 Gün</span>
      </div>
    </div>

    <!-- D&uuml;r&uuml;m Satış Bloğu -->
    <div class="card" id="durumBlock">
      <div class="ctitle">
        <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 11l19-9-9 19-2-8-8-2z"/></svg>
        D&uuml;r&uuml;m Sat&ışlar&ı
        <span id="durumBadge" style="margin-left:auto;background:var(--or2);color:var(--or);border:1px solid rgba(245,124,0,.3);border-radius:20px;padding:2px 9px;font-size:10px;font-weight:700"></span>
      </div>
      <div class="kgrid" style="margin-bottom:14px">
        <div class="kcard" style="grid-column:span 2">
          <div class="klbl">Ciro</div>
          <div class="kval" id="dRevenue">DH0</div>
          <div class="ksub">Toplam DH</div>
        </div>
        <div class="kcard" style="grid-column:span 2">
          <div class="klbl">Satış</div>
          <div class="kval" id="dCount">0</div>
          <div class="ksub">Dürüm adedi</div>
        </div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:14px">
        <div style="background:var(--bg);border-radius:10px;padding:12px;min-width:0">
          <div style="font-size:10px;color:var(--mu);margin-bottom:4px;letter-spacing:.06em">Ortalama Fiyat</div>
          <div style="font-family:'Inter',system-ui,sans-serif;font-size:20px;font-weight:800;color:var(--cr);white-space:nowrap;overflow:hidden;text-overflow:ellipsis" id="dAvgPrice">DH0</div>
        </div>
        <div style="background:var(--bg);border-radius:10px;padding:12px;min-width:0">
          <div style="font-size:10px;color:var(--mu);margin-bottom:4px;letter-spacing:.06em">Gider</div>
          <div style="font-family:'Inter',system-ui,sans-serif;font-size:20px;font-weight:800;color:var(--cr);white-space:nowrap;overflow:hidden;text-overflow:ellipsis" id="dExpenses">DH0</div>
        </div>
        <div style="background:var(--bg);border-radius:10px;padding:12px;min-width:0;grid-column:span 2">
          <div style="font-size:10px;color:var(--mu);margin-bottom:4px;letter-spacing:.06em">Toplam Ciro</div>
          <div style="font-family:'Inter',system-ui,sans-serif;font-size:20px;font-weight:800;color:var(--cr);white-space:nowrap;overflow:hidden;text-overflow:ellipsis" id="dWaste">DH0</div>
        </div>
      </div>
      <!-- Dürüm Grafik -->
      <div style="display:flex;background:var(--s2);border-radius:10px;padding:3px;margin-bottom:12px;border:1px solid var(--bd)">
        <button id="dseg-daily" class="on" onclick="setDurumPeriod('daily')" style="flex:1;border:none;background:transparent;color:var(--mu);font-family:var(--font);font-size:13px;font-weight:700;padding:8px 0;border-radius:7px;cursor:pointer;transition:all .2s">Günlük</button>
        <button id="dseg-weekly" onclick="setDurumPeriod('weekly')" style="flex:1;border:none;background:transparent;color:var(--mu);font-family:var(--font);font-size:13px;font-weight:700;padding:8px 0;border-radius:7px;cursor:pointer;transition:all .2s">Haftalık</button>
        <button id="dseg-monthly" onclick="setDurumPeriod('monthly')" style="flex:1;border:none;background:transparent;color:var(--mu);font-family:var(--font);font-size:13px;font-weight:700;padding:8px 0;border-radius:7px;cursor:pointer;transition:all .2s">Aylık</button>
      </div>
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:10px">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#F57C00" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>
        <span id="durumChartTitle" style="font-size:13px;font-weight:700;color:var(--cr)">Dürüm Satışı — Son 7 Gün</span>
      </div>
      <div style="width:100%;height:180px;position:relative">
        <svg id="durumChartSvg" viewBox="0 0 320 160" preserveAspectRatio="none" style="width:100%;height:100%"></svg>
        <div id="durumChartTooltip" class="chart-tooltip"></div>
      </div>
      <div class="chart-legend" style="margin-top:8px">
        <span><span class="leg-dot" style="background:#F57C00"></span>Bu dönem</span>
        <span><span class="leg-dot" style="background:rgba(245,124,0,0.35)"></span>Önceki</span>
      </div>
    </div>

    <!-- Actions -->
    <div class="acts">
      <button class="btn btn-o" onclick="shareWhatsApp()">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
        WhatsApp
      </button>
      <button class="btn btn-o" onclick="exportData()">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        Dışa Aktar
      </button>
      <button class="btn btn-g" onclick="document.getElementById('modal').classList.add('show')">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
        İçe Aktar
      </button>
    </div>

    <div class="note"><strong>Şeffaflık Notu:</strong> Tüm veriler gerçek zamanlı güncellenmektedir. Yatırımcı güveni ve operasyonel şeffaflık en yüksek önceliğimizdir.</div>
  </div>
</div>

<!-- FORM VIEW -->
<div id="formView">
  <div class="wrap">
    <button class="back" onclick="showDash()">
      <svg width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
      Panele Dön
    </button>
    <h1 class="ftitle">30 Saniye Giriş</h1>
    <p class="fsub">Günün özetini hızlıca girin</p>

    <div class="card" style="padding:22px">
      <div class="igrp">
        <label class="ilbl">Günlük Ciro (DH)</label>
        <input class="ifield" id="fRevenue" type="number" inputmode="decimal" placeholder="8500" oninput="calcLive()">
      </div>
      <div class="igrp">
        <label class="ilbl">Satılan Kase (Adet)</label>
        <input class="ifield" id="fBowls" type="number" inputmode="numeric" placeholder="285" oninput="calcLive()">
      </div>
      <div class="igrp">
        <label class="ilbl">Toplam Giderler (DH)</label>
        <input class="ifield" id="fExpenses" type="number" inputmode="decimal" placeholder="5000" oninput="calcLive()">
      </div>
      <div class="igrp" style="margin-bottom:0">
        <label class="ilbl">Atık (Kase Sayısı)</label>
        <input class="ifield" id="fWaste" type="number" inputmode="numeric" placeholder="15" oninput="calcLive()">
      </div>

      <!-- D&uuml;r&uuml;m Bölümü -->
      <div style="margin-top:20px;padding-top:18px;border-top:1px solid var(--bd)">
        <div style="display:flex;align-items:center;gap:8px;margin-bottom:14px">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="#F57C00" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 11l19-9-9 19-2-8-8-2z"/></svg>
          <span style="font-family:'Inter',system-ui,sans-serif;font-size:13px;font-weight:700;color:var(--cr)">D&uuml;r&uuml;m Sat&ışlar&ı</span>
        </div>
        <div class="igrp">
          <label class="ilbl">Dürüm Cirosu (DH)</label>
          <input class="ifield" id="fDurumRevenue" type="number" inputmode="decimal" placeholder="3200" oninput="calcLive()">
        </div>
        <div class="igrp">
          <label class="ilbl">Satılan D&uuml;r&uuml;m (Adet)</label>
          <input class="ifield" id="fDurumCount" type="number" inputmode="numeric" placeholder="80" oninput="calcLive()">
      
